<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // Object.setPrototypeOf方法的作用与__proto__相同，用来设置一个对象的prototype对象，返回参数对象本身。
    // 它是 ES6 正式推荐的设置原型对象的方法。
    (function () {
      // 格式
      // Object.setPrototypeOf(object, prototype)

      // 用法
      // const o = Object.setPrototypeOf({}, null);

      // 该方法等同于下面的函数。

      function setPrototype(obj, proto) {
        obj.__proto__ = proto;
        return obj;
      }
    })();

    console.log('------------------------');

    (function () {
      // 下面是一个例子。
      let proto = {};
      let obj = {
        x: 10
      };
      Object.setPrototypeOf(obj, proto);

      proto.y = 20;
      proto.z = 40;

      console.log(obj.x); // 10
      console.log(obj.y); // 20
      console.log(obj.z); // 40

      // 上面代码将proto对象设为obj对象的原型，所以从obj对象可以读取proto对象的属性。
    })();

    console.log('------------------------');

    (function () {
      // 如果第一个参数不是对象，会自动转为对象。但是由于返回的还是第一个参数，所以这个操作不会产生任何效果。
      console.log(Object.setPrototypeOf(1, {}) === 1); // true
      console.log(Object.setPrototypeOf('foo', {}) === 'foo'); // true
      console.log(Object.setPrototypeOf(true, {}) === true); // true



      // 由于undefined和null无法转为对象，所以如果第一个参数是undefined或null，就会报错。

      // console.log(Object.setPrototypeOf(undefined, {}));
      // TypeError: Object.setPrototypeOf called on null or undefined

      // console.log(Object.setPrototypeOf(null, {}));
      // TypeError: Object.setPrototypeOf called on null or undefined
    })();
  </script>
</body>

</html>