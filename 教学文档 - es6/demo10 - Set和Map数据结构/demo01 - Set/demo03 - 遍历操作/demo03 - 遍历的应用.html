<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // 扩展运算符（...）内部使用for...of循环，所以也可以用于 Set 结构。
    (function () {
      let set = new Set(['red', 'green', 'blue']);
      let arr = [...set];
      console.log(arr);
      // ['red', 'green', 'blue']
    })();

    console.log('------------------------');

    (function () {
      // 扩展运算符和 Set 结构相结合，就可以去除数组的重复成员。

      let arr = [3, 5, 2, 2, 5, 5];
      let unique = [...new Set(arr)];
      console.log(unique);
      // [3, 5, 2]
    })();

    console.log('------------------------');

    (function () {
      // 而且，数组的map和filter方法也可以用于 Set 了。

      let set1 = new Set([1, 2, 3]);
      set1 = new Set([...set1].map(x => x * 2));
      console.log(set1);
      // 返回Set结构：{2, 4, 6}

      let set2 = new Set([1, 2, 3, 4, 5]);
      set2 = new Set([...set2].filter(x => (x % 2) == 0));
      console.log(set2);
      // 返回Set结构：{2, 4}
    })();

    console.log('------------------------');

    (function () {
      // 因此使用 Set 可以很容易地实现并集（Union）、交集（Intersect）和差集（Difference）。

      let a = new Set([1, 2, 3]);
      let b = new Set([4, 3, 2]);

      // 并集
      let union = new Set([...a, ...b]);
      console.log(union);
      // Set {1, 2, 3, 4}

      // 交集
      let intersect = new Set([...a].filter(x => b.has(x)));
      console.log(intersect);
      // set {2, 3}

      // 差集
      let difference = new Set([...a].filter(x => !b.has(x)));
      console.log(difference);
      // Set {1}
      let difference2 = new Set([...a,...b]).filter(x => !b.has(x));
      console.log(difference2);
    })();
  </script>
</body>

</html>