<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style rel="stylesheet" type="text/css">
        *{
            margin:0;
            padding: 0;
        }
        body{
            display: block;
            clear: both;
            zoom: 1;
        }
        body:after{
            content: '';
            height: 0;
            display: block;
            zoom: 1;
            clear: both;
        }
        ul li{
            list-style: none;
        }
        .menu{
            border:3px solid red;
            width: 200px;
            position: fixed;
            left:0;
            top: 0;
        }
        .menu li{
            padding:10px 3px;
            border:1px solid green;
        }
        content{
            float: right;
            border:2px solid skyblue;
            width: calc(100% - 210px);
        }
        .content{
            border:1px solid black;
            background-color: #eee;
        }
        h1{
            background-color: #fefefe;
            padding:10px;
        }
        .active{
            background-color: lightblue;
        }
    </style>
    <script src="../jQuery插件/js/jquery.min.js"></script>
    <script>
        $(function(){
            var itemRange = [];
            var oMenuItem = $(".menu li");
            $.each($(".content"),function(index,item){
                var itemHeight = $(item).height();
                itemRange.push({
                    name:$(item).find('h1').attr('contentName'),
                    minHeight:$(item).offset().top,
                    maxHeight:$(item).offset().top + itemHeight
                })
            });
            console.log(itemRange);
            $(document).scroll(function(e){
                var dH = $(document).scrollTop();           // 当前浏览到的高度
                // 每次滑动屏幕的时候遍历所有的右侧内容区，检测当前的高度符合哪个区域，就给对应的菜单标签加上class=active
                $.each(itemRange,function(index,item){
                    if(dH>=item.minHeight&&dH<=item.maxHeight){
                        var oActiveLi = $('.menu li[id='+item.name+']');
                        if(!oActiveLi.hasClass('active')){
                            oMenuItem.removeClass('active');
                            oActiveLi.addClass('active');
                        }
                    }else if(dH<itemRange[0].minHeight||dH>itemRange[itemRange.length-1].maxHeight){
                        // 超出content的范围则左侧的菜单栏不响应
                        oMenuItem.removeClass('active');
                    }
                })
            });
            oMenuItem.click(function(){
                console.log(itemRange[$(this).index()]);
                $("html,body").animate({"scrollTop":itemRange[$(this).index()].minHeight},'fast')
            })
        })
    </script>
</head>
<body>
<ul class="menu">
    <li id="1111">1111</li>
    <li id="2222">2222</li>
    <li id="3333">3333</li>
    <li id="4444">4444</li>
    <li id="5555">5555</li>
    <li id="6666">6666</li>
</ul>
<br>
<br>
<br>
<br>
<br>
<content>
    <div class="content content1">
        <h1 contentName="1111">1111</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
    <div class="content content2">
        <h1 contentName="2222">2222</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
    <div class="content content3">
        <h1 contentName="3333">3333</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
    <div class="content content4">
        <h1 contentName="4444">4444</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
    <div class="content content5">
        <h1 contentName="5555">5555</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
    <div class="content content6">
        <h1 contentName="6666">6666</h1>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    </div>
</content>
<br clear="all"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>