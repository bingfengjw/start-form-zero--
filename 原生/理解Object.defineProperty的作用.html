<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    // 对象是由多个名/值对组成的无序的集合。对象中每个属性对应任意类型的值。
    // 定义对象可以使用构造函数或字面量的形式：
    (function(){
        let obj = new Object;  //obj = {}
        obj.name = "张三";  //添加描述
        obj.say = function(){};  //添加行为
        // 除了以上添加属性的方式，还可以使用Object.defineProperty定义新属性或修改原有的属性。
    })();

    // 语法
        // Object.defineProperty(obj,prop,descriptor)
    // 参数说明：
        // obj：必需。目标对象
        // prop：必需。需定义或修改的属性的名字
        // descriptor：必需。目标属性所拥有的特性

    // 返回值：
    // 传入函数的对象。即第一个参数obj

    // 数据描述
    let obj = {test:'hello world'};
    // 对象已有的属性添加特性描述
    Object.defineProperty(obj,"test",{
        configurable:true | false,               // 是否可以删除目标属性或是否可以再次修改属性的特性（writable, configurable, enumerable）。设置为true可以被删除或可以重新设置特性；设置为false，不能被可以被删除或不可以重新设置特性。默认为false。
        enumerable:true | false,                 // 此属性是否可以被枚举（使用for...in或Object.keys()）。设置为true可以被枚举；设置为false，不能被枚举。默认为false。
        value:'任意类型的值',                     // 属性对应的值，默认undefined，可以为任意类型
        writable:true | false                    // 属性的值是否可以被重写，设置为true可以重写，false不可重写，默认false
    });
    // 对象新添加的属性的特性描述
    Object.defineProperty(obj,"newKey",{
        configurable:true | false,
        enumerable:true | false,
        value:'任意类型的值',
        writable:true | false
    });

    // 存取器描述
    let obj2 = {};
    Object.defineProperty(obj2,"newKey",{
        get:function (){} | undefined,
        set:function (value){} | undefined,
        configurable: true | false,
        enumerable: true | false
    });

    //当设置或获取对象的某个属性的值的时候，可以提供getter/setter方法。
        // getter 是一种获得属性值的方法
        // setter是一种设置属性值的方法。
    // 在特性中使用get/set属性来定义对应的方法。
    let obj3 = {};
    let initValue = 'hello';
    Object.defineProperty(obj3,"newKey",{
        get:function (){
            //当获取值的时候触发的函数
            return initValue;
        },
        set:function (value){
            //当设置值的时候触发的函数,设置的新值通过参数value拿到
            initValue = value;
        }
    });
    //获取值
    console.log( obj.newKey );  //hello
    //设置值
    obj.newKey = 'change value';
    console.log( obj.newKey ); //change value

    // 注意：get或set不是必须成对出现，任写其一就可以。如果不设置方法，则get和set的默认值为undefined
    // configurable和enumerable同上面的用法。
</script>
</body>
</html>